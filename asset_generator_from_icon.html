<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dawn Asset Generator</title>
    <style>
        body { font-family: sans-serif; padding: 40px; background: #f4f4f4; text-align: center; }
        .container { background: white; max-width: 600px; margin: 0 auto; padding: 40px; border-radius: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; }
        .upload-btn { background: #2c3e50; color: white; padding: 15px 30px; border-radius: 8px; cursor: pointer; display: inline-block; margin-bottom: 20px; }
        .preview-area { margin-top: 30px; border-top: 1px solid #ddd; padding-top: 30px; display: none; }
        .asset-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 30px; padding: 20px; background: #fafafa; border-radius: 10px; border: 1px dashed #ccc; }
        button.download { background: #d4af37; border: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; cursor: pointer; color: #fff; }
        button.download:hover { background: #c5a028; }
        canvas { border: 1px solid #eee; background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PHJlY3Qgd2lkdGg9IjUiIGhlaWdodD0iNSIgZmlsbD0iI2ZmZmZmZiIvPjxyZWN0IHg9IjUiIHdpZHRoPSI1IiBoZWlnaHQ9IjUiIGZpbGw9IiNlZWVlZWUiLz48cmVjdCB5PSI1IiB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSIjZWVlZWVlIi8+PHJlY3QgeD0iNSIgeT0iNSIgd2lkdGg9IjUiIGhlaWdodD0iNSIgZmlsbD0iI2ZmZmZmZiIvPjwvc3ZnPg=='); }
    </style>
</head>
<body>

<div class="container">
    <h1>1. Upload App Icon</h1>
    <p>Select your <code>src/assets/icons/app_icon.png</code> file</p>
    
    <input type="file" id="uploadInput" accept="image/png" style="display:none">
    <label for="uploadInput" class="upload-btn">ðŸ“‚ Select App Icon</label>

    <div class="preview-area" id="previewArea">
        <h2>2. Download Assets</h2>
        
        <div class="asset-row">
            <div>
                <h3>Favicon (64x64)</h3>
                <canvas id="canvasFavicon" width="64" height="64"></canvas>
            </div>
            <button class="download" onclick="downloadAsset('canvasFavicon', 'favicon.png')">â¬‡ Download</button>
        </div>

        <div class="asset-row">
            <div>
                <h3>Header Logo (Transparent)</h3>
                <p>Auto-generated with "Dawn" text</p>
                <canvas id="canvasHeader" width="300" height="80"></canvas>
            </div>
            <button class="download" onclick="downloadAsset('canvasHeader', 'dawn_header_logo.png')">â¬‡ Download</button>
        </div>
    </div>
</div>

<script>
    const input = document.getElementById('uploadInput');
    const preview = document.getElementById('previewArea');

    input.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;

        const img = new Image();
        img.onload = function() {
            generateFavicon(img);
            generateHeader(img);
            preview.style.display = 'block';
        };
        img.src = URL.createObjectURL(file);
    });

    function generateFavicon(sourceImg) {
        const ctx = document.getElementById('canvasFavicon').getContext('2d');
        // Simple resize
        ctx.clearRect(0,0,64,64);
        ctx.drawImage(sourceImg, 0, 0, 64, 64);
    }

    function generateHeader(sourceImg) {
        const c = document.getElementById('canvasHeader');
        const ctx = c.getContext('2d');
        ctx.clearRect(0,0,300,80);

        // 1. Draw Icon
        ctx.shadowColor = "rgba(0,0,0,0.1)";
        ctx.shadowBlur = 10;
        ctx.shadowOffsetY = 4;
        // Draw icon rounded
        ctx.save();
        roundedRect(ctx, 10, 15, 50, 50, 12);
        ctx.clip();
        ctx.drawImage(sourceImg, 10, 15, 50, 50);
        ctx.restore();

        // 2. Draw Text
        ctx.shadowColor = "transparent";
        ctx.fillStyle = "#2c3e50"; // --ink color
        ctx.font = "bold 40px Georgia, serif"; // Matches landing page
        ctx.textBaseline = "middle";
        ctx.fillText("Dawn", 80, 42);
    }

    function roundedRect(ctx, x, y, width, height, radius) {
        ctx.beginPath();
        ctx.moveTo(x + radius, y);
        ctx.lineTo(x + width - radius, y);
        ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
        ctx.lineTo(x + width, y + height - radius);
        ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
        ctx.lineTo(x + radius, y + height);
        ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
        ctx.lineTo(x, y + radius);
        ctx.quadraticCurveTo(x, y, x + radius, y);
        ctx.closePath();
    }

    function downloadAsset(canvasId, filename) {
        const link = document.createElement('a');
        link.download = filename;
        link.href = document.getElementById(canvasId).toDataURL('image/png');
        link.click();
    }
</script>

</body>
</html>